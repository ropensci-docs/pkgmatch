<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Find R packages matching an input of either text or another package — pkgmatch_similar_pkgs • pkgmatch</title><!-- rOpenSci favicons --><link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="/apple-touch-icon.png"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Find R packages matching an input of either text or another package — pkgmatch_similar_pkgs"><meta name="description" content="This function accepts as input either a text description, or
a path to a local R package, and returns information on R packages which
best match that input. Matches are found from within a specified &quot;corpus&quot;,
currently all packages from either rOpenSci's package suite, or from
CRAN.
The returned object has a default print method which prints the best 5
matches directly to the screen, yet returns information on all packages
within the specified corpus. This information is in the form of a
data.frame, with one column for the package name, and one or more
additional columns of integer ranks for each package. There is also a head
method to print the first few entries of these full data (default n = 5).
To see all data, use as.data.frame().
Ranks are obtained from scores derived from:
Cosine similarities between Large Language Model (LLM) embeddings for
the input, and corresponding embeddings for the specified corpus.
&quot;Best Match 25&quot; (BM25)
scores based on document token frequencies.


Ranks for text matches are generally obtained from packages both including
and excluding function descriptions as part of the package text. This
results in up to four scores for each input. These scores are then combined
to a final ranking using the Reciprocal Rank Fusion (RRF) algorithm. The
additional parameter of llm_proportion determines the extent to which the
final ranking weights the LLM versus BM25 components.
Finally, all components of this function are locally cached for each call
(by the memoise package), so additional calls to this function with
the same input and corpus should be much faster than initial calls. This
means the effect of changing llm_proportion can easily be examined by
simply repeating calls to this function."><meta property="og:description" content="This function accepts as input either a text description, or
a path to a local R package, and returns information on R packages which
best match that input. Matches are found from within a specified &quot;corpus&quot;,
currently all packages from either rOpenSci's package suite, or from
CRAN.
The returned object has a default print method which prints the best 5
matches directly to the screen, yet returns information on all packages
within the specified corpus. This information is in the form of a
data.frame, with one column for the package name, and one or more
additional columns of integer ranks for each package. There is also a head
method to print the first few entries of these full data (default n = 5).
To see all data, use as.data.frame().
Ranks are obtained from scores derived from:
Cosine similarities between Large Language Model (LLM) embeddings for
the input, and corresponding embeddings for the specified corpus.
&quot;Best Match 25&quot; (BM25)
scores based on document token frequencies.


Ranks for text matches are generally obtained from packages both including
and excluding function descriptions as part of the package text. This
results in up to four scores for each input. These scores are then combined
to a final ranking using the Reciprocal Rank Fusion (RRF) algorithm. The
additional parameter of llm_proportion determines the extent to which the
final ranking weights the LLM versus BM25 components.
Finally, all components of this function are locally cached for each call
(by the memoise package), so additional calls to this function with
the same input and corpus should be much faster than initial calls. This
means the effect of changing llm_proportion can easily be examined by
simply repeating calls to this function."><meta property="og:image" content="https://docs.ropensci.org/pkgmatch/logo.png"><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/gh/orestbida/cookieconsent@v3.0.0/dist/cookieconsent.css"><script src="https://cdn.jsdelivr.net/gh/orestbida/cookieconsent@v3.0.0/dist/cookieconsent.umd.js" data-cfasync="false"></script><script src="https://ropensci.org/scripts/matomo.js"></script><noscript><p><img src="https://ropensci.matomo.cloud/matomo.php?idsite=1&amp;rec=1" style="border:0;" alt=""></p></noscript></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">
    <a href="https://ropensci.org" class="external-link"><img src="https://ropensci.org/img/icon_short_white.svg" id="hexlogo" alt="rOpenSci"></a>
    <a class="navbar-brand me-2" href="../index.html">pkgmatch</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Released version">0.4.0.053</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"></ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="nav-link" href="../articles/pkgmatch.html">Get started</a></li>
<li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/why-local-llms.html">Why local LLMs?</a></li>
  </ul></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/ropensci-review-tools/pkgmatch/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Find R packages matching an input of either text or another package</h1>
      <small class="dont-index">Source: <a href="https://github.com/ropensci-review-tools/pkgmatch/blob/master/R/similar-pkgs.R" class="external-link"><code>R/similar-pkgs.R</code></a></small>
      <div class="d-none name"><code>pkgmatch_similar_pkgs.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>This function accepts as <code>input</code> either a text description, or
a path to a local R package, and returns information on R packages which
best match that input. Matches are found from within a specified "corpus",
currently all packages from either <a href="https://ropensci.org/packages" class="external-link">rOpenSci's package suite</a>, or from
<a href="https://cran.r-project.org" class="external-link">CRAN</a>.</p>
<p>The returned object has a default <code>print</code> method which prints the best 5
matches directly to the screen, yet returns information on all packages
within the specified corpus. This information is in the form of a
<code>data.frame</code>, with one column for the package name, and one or more
additional columns of integer ranks for each package. There is also a <code>head</code>
method to print the first few entries of these full data (default <code>n = 5</code>).
To see all data, use <code><a href="https://rdrr.io/r/base/as.data.frame.html" class="external-link">as.data.frame()</a></code>.</p>
<p>Ranks are obtained from scores derived from:</p><ul><li><p>Cosine similarities between Large Language Model (LLM) embeddings for
the <code>input</code>, and corresponding embeddings for the specified corpus.</p></li>
<li><p><a href="https://en.wikipedia.org/wiki/Okapi_BM25" class="external-link">"Best Match 25" (BM25)</a>
scores based on document token frequencies.</p></li>
</ul><p>Ranks for text matches are generally obtained from packages both including
and excluding function descriptions as part of the package text. This
results in up to four scores for each input. These scores are then combined
to a final ranking using the <a href="https://plg.uwaterloo.ca/~gvcormac/cormacksigir09-rrf.pdf" class="external-link">Reciprocal Rank Fusion (RRF) algorithm</a>. The
additional parameter of <code>llm_proportion</code> determines the extent to which the
final ranking weights the LLM versus BM25 components.</p>
<p>Finally, all components of this function are locally cached for each call
(by the <span class="pkg">memoise</span> package), so additional calls to this function with
the same <code>input</code> and <code>corpus</code> should be much faster than initial calls. This
means the effect of changing <code>llm_proportion</code> can easily be examined by
simply repeating calls to this function.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">pkgmatch_similar_pkgs</span><span class="op">(</span></span>
<span>  <span class="va">input</span>,</span>
<span>  corpus <span class="op">=</span> <span class="st">"ropensci"</span>,</span>
<span>  embeddings <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  idfs <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  input_is_code <span class="op">=</span> <span class="fu"><a href="text_is_code.html">text_is_code</a></span><span class="op">(</span><span class="va">input</span><span class="op">)</span>,</span>
<span>  llm_proportion <span class="op">=</span> <span class="fl">0.5</span>,</span>
<span>  n <span class="op">=</span> <span class="fl">5L</span>,</span>
<span>  browse <span class="op">=</span> <span class="cn">FALSE</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-input">input<a class="anchor" aria-label="anchor" href="#arg-input"></a></dt>
<dd><p>Either a path to local source code of an R package, or a text
string.</p></dd>


<dt id="arg-corpus">corpus<a class="anchor" aria-label="anchor" href="#arg-corpus"></a></dt>
<dd><p>If <code>embeddings</code> or <code>idfs</code> parameters are not specified, they
are automatically downloaded for the corpus specified by this parameter.
Must be one of "ropensci" or "cran". The function will then return the most
similar package from the specified corpus.</p></dd>


<dt id="arg-embeddings">embeddings<a class="anchor" aria-label="anchor" href="#arg-embeddings"></a></dt>
<dd><p>Large Language Model embeddings for all rOpenSci packages,
generated from <a href="pkgmatch_embeddings_from_pkgs.html">pkgmatch_embeddings_from_pkgs</a>. If not provided,
pre-generated embeddings will be downloaded and stored in a local cache
directory.</p></dd>


<dt id="arg-idfs">idfs<a class="anchor" aria-label="anchor" href="#arg-idfs"></a></dt>
<dd><p>Inverse Document Frequency tables for all rOpenSci packages,
generated from <a href="pkgmatch_bm25.html">pkgmatch_bm25</a>. If not provided, pre-generated IDF
tables will be downloaded and stored in a local cache directory.</p></dd>


<dt id="arg-input-is-code">input_is_code<a class="anchor" aria-label="anchor" href="#arg-input-is-code"></a></dt>
<dd><p>A binary flag indicating whether <code>input</code> is code or
plain text. Ignored if <code>input</code> is path to a local package; otherwise can be
used to force appropriate interpretation if input type.</p></dd>


<dt id="arg-llm-proportion">llm_proportion<a class="anchor" aria-label="anchor" href="#arg-llm-proportion"></a></dt>
<dd><p>A value between 0 and 1 to control the relative
contributions of results from Large Language Models ("LLMs") versus results
from traditional token-frequency models. Final rankings are generated by
combining these two kinds of results, so that <code>llm_proportion = 0</code> will
return results from token frequency analyses only, while
<code>llm_proportion = 1</code> will return results from LLMs only.</p></dd>


<dt id="arg-n">n<a class="anchor" aria-label="anchor" href="#arg-n"></a></dt>
<dd><p>When the result of this function is printed to screen, the top <code>n</code>
packages will be displayed.</p></dd>


<dt id="arg-browse">browse<a class="anchor" aria-label="anchor" href="#arg-browse"></a></dt>
<dd><p>If <code>TRUE</code>, automatically open webpages of the top <code>n</code> matches
in local browser.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>A <code>data.frame</code> with a "package" column naming packages, and one or
more columns of package ranks in terms of text similarity and, if <code>input</code> is
a local path to an entire R package, of similarity in code structure. As
described above, the default <code>print</code> method prints package names only. To
see full result, use <code><a href="https://rdrr.io/r/base/as.data.frame.html" class="external-link">as.data.frame()</a></code>.</p>
    </div>
    <div class="section level2">
    <h2 id="note">Note<a class="anchor" aria-label="anchor" href="#note"></a></h2>
    <p>The first time this function is run without passing either
<code>embeddings</code> or <code>idfs</code>, required values will be automatically downloaded and
stored in a locally persistent cache directory. Especially for the "cran"
corpus, this downloading may take quite some time.</p>
    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p>input_is_code</p>
<p>Other main:
<code><a href="pkgmatch_similar_fns.html">pkgmatch_similar_fns</a>()</code></p></div>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span> <span class="co"># \dontrun{</span></span></span>
<span class="r-in"><span><span class="va">input</span> <span class="op">&lt;-</span> <span class="st">"Download open spatial data from NASA"</span></span></span>
<span class="r-in"><span><span class="va">p</span> <span class="op">&lt;-</span> <span class="fu">pkgmatch_similar_pkgs</span> <span class="op">(</span><span class="va">input</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">p</span> <span class="co"># Default print method, lists 5 best matching packages</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span> <span class="op">(</span><span class="va">p</span><span class="op">)</span> <span class="co"># Shows first 5 rows of full `data.frame` object</span></span></span>
<span class="r-in"><span><span class="co"># This second call will be much faster than first call:</span></span></span>
<span class="r-in"><span><span class="va">p2</span> <span class="op">&lt;-</span> <span class="fu">pkgmatch_similar_pkgs</span> <span class="op">(</span><span class="va">input</span>, llm_proportion <span class="op">=</span> <span class="fl">0.25</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span> <span class="co"># }</span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><!-- begin footer --><div class="footer">
    <div class="container">
        <div class="row start top-4 bottom-8">
            <div class="col-2"> <img id="footerlogo" src="https://ropensci.org/img/icon_short_white.svg"></div>
            <div class="col-10">
                <div class="row">
                    <div class="col-md-4 col-xs-6">
                        <a href="https://github.com/ropensci" target="_blank" class="external-link"><div class="icon fab fa-github"></div></a>
                        <a href="https://github.com/ropenscilabs" target="_blank" class="external-link"><div class="icon fa fa-flask"></div></a>
                        <a href="https://hachyderm.io/@ropensci" target="_blank" class="external-link"><div class="icon fab fa-mastodon"></div></a>
                        <a href="https://vimeo.com/ropensci" target="_blank" class="external-link"><div class="icon fab fa-vimeo"></div></a>
                    </div>
                </div>
                <div class="row top-4">
                    <div class="col-md-2 col-sm-4">
                        <ul><h5 class="bottom-2">About</h5>
                            <li><a href="https://ropensci.org/about" class="external-link">About rOpenSci</a></li>
                            <li><a href="https://ropensci.org/software-review" class="external-link">Software Review</a></li>
                            <li><a href="https://ropensci.org/about#team" class="external-link">Our Team</a></li>
                            <li><a href="https://ropensci.org/careers" class="external-link">Jobs</a></li>
                            <li><a href="https://ropensci.org/donate" class="external-link">Donate</a></li>
                            <li><a href="https://ropensci.org/contact" class="external-link">Contact Us</a></li>
                        </ul></div>
                    <div class="col-md-3 col-sm-4">
                        <ul><h5 class="bottom-2">Community</h5>
                            <li><a href="https://ropensci.org/community/" class="external-link">Our Community</a></li>
                            <li><a href="https://ropensci.org/commcalls/" class="external-link">Community calls</a></li>
                            <li><a href="https://ropensci.org/events/" class="external-link">Events</a></li>
                            <li><a href="https://discuss.ropensci.org/" class="external-link">Join the Discussion</a></li>
                            <li><a href="https://ropensci.org/code-of-conduct" class="external-link">Code of conduct</a></li>
                        </ul></div>
                    <div class="col-md-2 col-sm-4">
                        <ul><h5 class="bottom-2">Resources</h5>
                            <li><a href="https://ropensci.org/packages/" class="external-link">Packages</a></li>
                            <li><a href="https://ropensci.org/usecases/" class="external-link">Use Cases</a></li>
                            <li><a href="https://ropensci.org/talks-papers/" class="external-link">Talks &amp; Publications</a></li>
                            <li><a href="https://docs.ropensci.org/" class="external-link">Documentation</a></li>
                            <li><a href="https://ropensci.org/news/" class="external-link">Newsletter</a></li>
                            <li><a href="https://ropensci.org/how-to-cite-ropensci/" class="external-link">Cite rOpenSci</a></li>
                        </ul></div>
                    <div class="col-md-4 col-xs-12">
                        <h5 class="bottom-2"></h5>

                        <p>rOpenSci is a fiscally sponsored project of <a href="http://numfocus.org" class="external-link">NumFOCUS</a>.</p>

                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<!-- / end footer -->


    </footer></div>





  </body></html>

